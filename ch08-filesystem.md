# 第8章 ファイルシステム

## 8.1 用語

## 8.2 モデル

### 8.2.1 ファイルシステムインターフェイス
### 8.2.2 ファイルシステムキャッシュ
### 8.2.3 2次キャッシュ

## 8.3 コンセプト
### 8.3.1 ファイルシステムレイテンシ
### 8.3.2 キャッシング
### 8.3.3 ランダムI/OとシーケンシャルI/O
### 8.3.4 プリフェッチ
### 8.3.5 先読み

### 8.3.6 ライトバックキャッシング
### 8.3.7 同期書き込み
### 8.3.8 Raw I/OとDirect I/O
### 8.3.9 ノンブロッキングI/O
### 8.3.10 メモリマップトファイル
### 8.3.11 メタデータ
### 8.3.12 論理I/Oと物理I/O
### 8.3.13 オペレーションは平等ではない
### 8.3.14 特殊ファイルシステム
### 8.3.15 最終アクセス時刻
### 8.3.16 容量

## 8.4 アーキテクチャ
### 8.4.1 ファイルシステムI/Oスタック
### 8.4.2 VFS
### 8.4.3 ファイルシステムキャッシュ
### 8.4.4 ファイルシステムのパフォーマンスに関わるその他の機能と属性
#### 8.4.4.1 ブロックとエクステント
#### 8.4.4.2 ジャーナリング
#### 8.4.4.3 コピーオンライト
#### 8.4.4.4 スクラビング
#### 8.4.4.5 その他の機能

### 8.4.5 ファイルシステムタイプ
#### 8.4.5.1 FFS
#### 8.4.5.2 ext3
#### 8.4.5.3 ext4
#### 8.4.5.4 XFS
#### 8.4.5.5 ZFS
#### 8.4.5.6 Btrfs

### 8.4.6 ボリュームとプール

## 8.5 メソドロジ

### 8.5.1 ディスク分析
### 8.5.2 レイテンシ分析
#### 8.5.2.1 トランザクションのコスト
### 8.5.3 ワークロードの特性の把握
#### 8.5.3.1 高度なワークロードの特性チェックリスト
#### 8.5.3.2 パフォーマンスの特性の把握
#### 8.5.3.3 イベントトレーシング
### 8.5.4 パフォーマンスモニタリング
### 8.5.5 静的パフォーマンスチューニング
### 8.5.6 キャッシュのチューニング
### 8.5.7 ワークロードの分離
### 8.5.8 マイクロベンチマーキング

## 8.6 可観測性ツール

### 8.6.1 mount
### 8.6.2 free
### 8.6.3 top
### 8.6.4 vmstat
### 8.6.5 sar
### 8.6.6 slabtop
### 8.6.7 strace
### 8.6.8 fatrace
### 8.6.9 LatencyTOP
### 8.6.10 opensnoop
### 8.6.11 filetop
### 8.6.12 cachestat
### 8.6.13 ext4dist（xfs、zfs、btrfs、nfs）
### 8.6.14 ext4slower（xfs、zfs、btrfs、nfs）
### 8.6.15 bpftrace
#### 8.6.15.1 1行プログラム
#### 8.6.15.2 システムコールのトレース
#### 8.6.15.3 VFSのトレーシング
#### 8.6.15.4 ファイルシステムの内部構造
### 8.6.16 その他のツール
#### 8.6.16.1 ZFS
### 8.6.17 ビジュアライゼーション

## 8.7 実験

### 8.7.1 アドホックテスト
### 8.7.2 マイクロベンチマークツール
#### 8.7.2.1 Bonnie、Bonnie++
#### 8.7.2.2 fio
#### 8.7.2.3 FileBench
### 8.7.3 キャッシュのフラッシュ

## 8.8 チューニング

### 8.8.1 アプリケーションからの呼び出し
#### 8.8.1.1 posix_fadvise( )
#### 8.8.1.2 madvise( )
### 8.8.2 ext4
#### 8.8.2.1 mountとtnue2fs
#### 8.8.2.2 /sys/fsプロパティファイル
#### 8.8.2.3 e2fsck
### 8.8.3 ZFS

## 8.9 練習問題

## 8.10 参考文献
